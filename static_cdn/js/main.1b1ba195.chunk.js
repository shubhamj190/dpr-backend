(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{28:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(15),s=c.n(a),o=(c(28),c(5)),r=c(3),i=c(2),l=c(23),d=function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))},j=function(e){if(void 0!==typeof window){localStorage.removeItem("cart");localStorage.setItem("cart",JSON.stringify([])),e()}},b=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},u=function(e){var t=b()&&b().user.id;if(console.log("USERID: ",t),void 0!==typeof window)return localStorage.removeItem("jwt"),j((function(){})),fetch("http://localhost:8000/api/user/logout/".concat(t),{method:"GET"}).then((function(t){console.log("Signout success"),e()})).catch((function(e){return console.log(e)}))},m=c(0);function h(e){var t=e.component,c=Object(l.a)(e,["component"]);return Object(m.jsx)(r.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return b()?Object(m.jsx)(t,Object(i.a)({},e)):Object(m.jsx)(r.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))}var O=c(6),p=function(e,t){return e.location.pathname===t?{color:"red"}:{color:"green"}},f=Object(r.f)((function(e){var t=e.history;e.path;return Object(m.jsx)("div",{children:Object(m.jsx)("nav",{className:"navbar navbar-expand-lg fixed-top navbar-light bg-light",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Navbar"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link","aria-current":"page",to:"/",style:p(t,"/"),children:"Home"})}),b()&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link","aria-current":"page",to:"/user/dashboard",style:p(t,"/user/dashboard"),children:"Dashboard"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link","aria-current":"page",to:"/cart",style:p(t,"/cart"),children:"Cart"})}),!b()&&Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/signup",style:p(t,"/signup"),children:"Signup"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/signin",style:p(t,"/signin"),children:"Signin"})})]}),b()&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link text-warning",to:"/signout",tabindex:"-1",onClick:function(){u((function(){t.push("/")}))},children:"Signout"})})]})})]})})})}));function x(e){var t=e.title,c=void 0===t?"my title":t,n=e.description,a=void 0===n?"mydescription":n,s=(e.className,e.children);return Object(m.jsxs)("div",{children:[Object(m.jsx)(f,{}),Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsxs)("div",{className:"jumbotron text-center",children:[Object(m.jsx)("h2",{className:"display-4",children:c}),Object(m.jsx)("p",{className:"lead",children:a})]}),Object(m.jsx)("div",{classname:s,children:s}),Object(m.jsx)("footer",{className:"footer mt-auto py-3",children:Object(m.jsxs)("div",{className:"container-fluid bg-success text-white text-center py-3",children:[Object(m.jsx)("h4",{children:"if you goy any question reach me out on instagram "}),Object(m.jsx)("button",{className:"btn btn-warning btn-lg my-3",children:"contact us"}),Object(m.jsx)("div",{className:"conatiner",children:Object(m.jsx)("span",{classname:"text-muted",children:"an Amazing Django plus React course"})})]})})]})]})}function g(e){var t=e.product,c=t?t.image:"https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260";return Object(m.jsx)("div",{className:"rounded p-2",children:Object(m.jsx)("img",{src:c,style:{maxWidth:"100%",maxHeight:"100%"},className:"mb-3 rounded",alt:"this is aimage"})})}var v=function(e){var t=e.product,c=e.addtoCart,a=void 0===c||c,s=e.removeFromCart,o=void 0!==s&&s,l=e.reload,d=void 0===l?void 0:l,j=e.setReload,u=void 0===j?function(e){return e}:j,h=Object(n.useState)(!1),p=Object(O.a)(h,2),f=p[0],x=p[1];return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)("div",{className:"card-header lead",children:[Object(m.jsx)("strong",{children:t.name}),function(e){if(e)return Object(m.jsx)(r.a,{to:"/cart"})}(f)]}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(g,{product:t}),Object(m.jsx)("p",{className:"lead font-weight-normal text-wrap",children:t.description}),Object(m.jsxs)("p",{className:"btn btn-success rounded  btn-sm px-4",children:["$ ",t.price]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-12",children:function(e){return a&&Object(m.jsx)("button",{onClick:e,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}((function(){b()?(!function(e,t){var c=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(i.a)({},e)),localStorage.setItem("cart",JSON.stringify(c)),t())}(t,(function(){return x(!0)})),console.log("added to cart")):console.log("login please")}))}),Object(m.jsx)("div",{className:"col-12",children:o&&Object(m.jsx)("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){c._id==e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t))}(t._id),u(!d),console.log("product removed from cart")},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})})]})]})]})};Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKED:"http://127.0.0.1:8000/api/"}).REACT_APP_BACKEND;function N(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),o=Object(O.a)(s,2),r=(o[0],o[1]),i=function(){fetch("http://127.0.0.1:8000/api/product/",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error||void 0===e?(console.log("DATA IS UNDEFINED"),r(e.error)):(console.log("DAT IS NOT UNDEFINED"),a(e&&e))})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){i()}),[]),Object(m.jsxs)(x,{title:"Home Page",description:"Welcome to Tshirt store",children:[Object(m.jsx)("h1",{children:"Home component"}),Object(m.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-4",children:Object(m.jsx)(v,{product:e})},t)}))})]})}var y=c(22),w=c.n(y),S=function(e){var t=e.products,c=e.reload,a=void 0===c?void 0:c,s=e.setReload,o=void 0===s?function(e){return e}:s,l=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:""}),d=Object(O.a)(l,2),h=d[0],p=d[1],f=b()&&b().user.id,x=b()&&b().token,g=function(e,t){(function(e,t){return fetch("http://127.0.0.1:8000/api/payment/gettoken/".concat(e,"/").concat(t,"/"),{method:"GET"}).then((function(e){return console.log("This is a response",e),e.json()})).catch((function(e){console.error(e)}))})(e,t).then((function(e){if(e.error)p(Object(i.a)(Object(i.a)({},e),{},{error:e.error})),u((function(){return Object(m.jsx)(r.a,{to:"/signin"})}));else{var t=e.clientToken;p({clientToken:t})}}))};Object(n.useEffect)((function(){g(f,x)}),[]);var v=function(){h.instance.requestPaymentMethod().then((function(e){console.log("MY DATA",e);var c={paymentMethodNonce:e.nonce,amount:N()};(function(e,t,c){var n=new FormData;for(var a in c)n.append(a,c[a]);return fetch("http://127.0.0.1:8000/api/payment/process/".concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return e.json()})).catch((function(e){console.error(e)}))})(f,x,c).then((function(e){if(e.error)1==e.code&&(console.log("Payment failed"),u((function(){return Object(m.jsx)(r.a,{to:"/"})})));else{p(Object(i.a)(Object(i.a)({},h),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var c="";t.forEach((function(e){c+=e.name+","}));var n={products:c,transaction_id:e.transaction.id,amount:e.transaction.amount};(function(e,t,c){var n=new FormData;for(var a in c)n.append(a,c[a]);return fetch("http://127.0.0.1:8000/api/order/add/".concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))})(f,x,n).then((function(e){e.error?(1==e.code&&console.log("order failed"),u((function(){return Object(m.jsx)(r.a,{to:"/"})}))):1==e.success&&console.log("order success")})).catch((function(e){p({loading:!1,success:!1}),console.log("ORDER CATCH",e)}))}})).catch((function(e){console.log("PAYMENTPROCESS error",e)})),j((function(){console.log("cart is empty out"),o(!a)}))})).catch((function(e){console.log(e)}))},N=function(){var e=0;return t.map((function(t){e+=parseInt(t.price)})),e};return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{children:["your bill is ",N()]}),Object(m.jsx)("div",{children:null!==h.clientToken&&t.length>0?Object(m.jsxs)("div",{children:[Object(m.jsx)(w.a,{options:{authorization:h.clientToken},onInstance:function(e){return h.instance=e}}),Object(m.jsx)("button",{className:"btn btn-success btn-lg",onClick:v,children:"Buy"})]}):Object(m.jsx)("h3",{children:"please login or add something payment to the cart"})})]})};function E(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),o=Object(O.a)(s,2),r=o[0],i=o[1];Object(n.useEffect)((function(){a(d)}),[r]);return Object(m.jsx)(x,{title:"Cart Page",description:"cart checkout",children:Object(m.jsxs)("div",{className:"row text-center",children:[Object(m.jsx)("div",{className:"col-md-6",children:function(e){return Object(m.jsx)("div",{children:e.map((function(e,t){return Object(m.jsx)(v,{product:e,removeFromCart:!0,addFromCart:!0,reload:r,setReload:i,addtoCart:!1},t)}))})}(c)}),Object(m.jsx)("div",{className:"col-md-6",children:c.length>0?Object(m.jsx)(S,{products:c,setReload:!r}):Object(m.jsx)("h3",{children:"please login or add something to cart"})})]})})}function I(){return Object(m.jsx)(x,{title:"User Dashboard",description:"changes a user can do !!",children:"this is a user dashboard"})}var T=c(12);function C(){var e=Object(n.useState)({email:"ten@gmail.com",password:"12345",success:"",error:"",loading:!1,didRedirect:!1}),t=Object(O.a)(e,2),c=t[0],a=t[1],s=c.email,l=c.password,d=c.success,j=c.error,u=c.loading,h=(c.didRedirect,function(e){e.preventDefault(),function(e){var t=new FormData;for(var c in e)t.append(c,e[c]);return fetch("http://localhost:8000/api/user/login/",{method:"POST",body:t}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:s,password:l}).then((function(e){console.log(e),e.token?function(e,t){void 0!=typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){console.log("TOKEN ADDED"),a(Object(i.a)(Object(i.a)({},c),{},{didRedirect:!0,success:!0,error:!1,email:"",password:""}))})):a(Object(i.a)(Object(i.a)({},c),{},{loading:!1,error:!0}))})).catch((function(e){return console.log(e)}))}),p=function(e){return function(t){a(Object(i.a)(Object(i.a)({},c),{},Object(T.a)({error:!1},e,t.target.value)))}};return Object(m.jsxs)(x,{title:"Sign In",description:"Please sign in to purchase the item !!",children:[u&&Object(m.jsx)("div",{className:"alert alert-info",children:Object(m.jsx)("h2",{children:"Loading..."})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3",children:Object(m.jsxs)("div",{className:"alert alert-success ",style:{display:d?"":"none"},children:["logged in successfully ",Object(m.jsx)(o.b,{to:"/signin",children:"Login "})," !!"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3",children:Object(m.jsx)("div",{className:"alert alert-danger ",style:{display:j?"":"none"},children:"Something went wrong please try again"})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3 sm-3",children:Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{for:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control mb-3",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:s,onChange:p("email")}),Object(m.jsx)("div",{id:"emailHelp",className:"form-text",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{for:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control mb-3",id:"exampleInputPassword1",value:l,onChange:p("password")})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-lg mb-3 ",onClick:h,children:"Submit"})]})})}),Object(m.jsx)("p",{className:"text-center",children:JSON.stringify(c)}),function(){if(b)return Object(m.jsx)(r.a,{to:"/"})}]})}function D(){var e=Object(n.useState)({name:"",email:"",password:"",success:!1,error:""}),t=Object(O.a)(e,2),c=t[0],a=t[1],s=c.name,r=c.email,l=c.password,d=c.error,j=c.success,b=function(e){return function(t){a(Object(i.a)(Object(i.a)({},c),{},Object(T.a)({error:!1},e,t.target.value)))}},u=function(e){var t;e.preventDefault(),a(Object(i.a)(Object(i.a)({},c),{},{error:!1})),(t={name:s,email:r,password:l},fetch("http://localhost:8000/api/user/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log("DATA",e),e.email===r?a(Object(i.a)(Object(i.a)({},c),{},{name:"",email:"",password:"",success:!0,error:""})):a(Object(i.a)(Object(i.a)({},c),{},{error:!0,success:!1}))})).catch((function(e){console.log(e)}))};return Object(m.jsxs)(x,{title:"Signup",description:"Please signup to lco user",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3",children:Object(m.jsxs)("div",{className:"alert alert-success ",style:{display:j?"":"none"},children:["New account create successfully please ",Object(m.jsx)(o.b,{to:"/signin",children:"Login "})," !!"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3",children:Object(m.jsx)("div",{className:"alert alert-danger ",style:{display:d?"":"none"},children:"Something went wrong please try again"})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-sm-3 sm-3",children:Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{for:"exampleInputname",className:"form-label",children:"Name"}),Object(m.jsx)("input",{type:"text",className:"form-control mb-3",id:"exampleInputname","aria-describedby":"emailHelp",value:s,onChange:b("name")}),Object(m.jsx)("label",{for:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control mb-3",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:r,onChange:b("email")}),Object(m.jsx)("div",{id:"emailHelp",className:"form-text",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{for:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control mb-3",id:"exampleInputPassword1",value:l,onChange:b("password")})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-lg mb-3 ",onClick:u,children:"Submit"})]})})}),Object(m.jsx)("p",{className:"text-center",children:JSON.stringify(c)})]})}var P=function(){return Object(m.jsx)(o.a,{children:Object(m.jsxs)("switch",{children:[Object(m.jsx)(r.b,{path:"/",exact:!0,component:N}),Object(m.jsx)(r.b,{path:"/signup",exact:!0,component:D}),Object(m.jsx)(r.b,{path:"/signin",exact:!0,component:C}),Object(m.jsx)(h,{path:"/user/dashboard/",exact:!0,component:I}),Object(m.jsx)(h,{path:"/cart",exact:!0,component:E})]})})};s.a.render(Object(m.jsx)(P,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.1b1ba195.chunk.js.map